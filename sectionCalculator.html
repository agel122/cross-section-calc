<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <style>
        .selected {
            background-color: #8c8b8b;
            font-weight: bold;
            color: #fff;
        }

        table {
            width: 500px;
            border: 2px solid grey;
            border-collapse: collapse
        }

        th,
        td {
            border: 1px solid grey;
        }

        body {
            background-color: #dedcdc;
        }

        th {
            background-color: #7a7878;
        }

        input {
            background-color: #b5b3b3;
            width: 100px;
            height: 35px;

        }
    </style>
    <title>
        Расчет потребного сечения медного провода мм2
        в зависимости от суммарной потребляемой мощности
    </title>
</head>

<body>
    <div class="container" style="border-width:1;border-color: grey; border-style: solid; margin-top: 12px">
        <div class="row justify-content-start">
            <div class="col-auto align-self-center">
                <table id="mydata" style="font-size: 15px; margin-top: 12px">
                    <thead>
                        <tr>
                            <th>Мощность, кВт</th>
                            <th>Сечение, мм2</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>4.1</td>
                            <td>1.5</td>
                        </tr>
                        <tr>
                            <td>5.9</td>
                            <td>2.5</td>
                        </tr>
                        <tr>
                            <td>8.3</td>
                            <td>4.0</td>
                        </tr>
                        <tr>
                            <td>10.1</td>
                            <td>6.0</td>
                        </tr>
                        <tr>
                            <td>15.4</td>
                            <td>10.0</td>
                        </tr>
                        <tr>
                            <td>18.7</td>
                            <td>16.0</td>
                        </tr>
                        <tr>
                            <td>25.3</td>
                            <td>25.0</td>
                        </tr>
                        <tr>
                            <td>29.7</td>
                            <td>35.0</td>
                        </tr>
                        <tr>
                            <td>38.5</td>
                            <td>50.0</td>
                        </tr>
                        <tr>
                            <td>47.3</td>
                            <td>70.0</td>
                        </tr>
                        <tr>
                            <td>57.2</td>
                            <td>95.0</td>
                        </tr>
                        <tr>
                            <td>66.0</td>
                            <td>120.0</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-auto align-self-start">
                <div class="row gx-1 justify-content-start" style="margin-top: 12px;">
                    <div class=col-auto align-self-center>
                        Мощность, кВт:
                    </div>
                    <div class=col-auto align-self-center>
                        <input id="addedPower" type="text">
                    </div>
                    <div class=col-auto align-self-center>
                        <button id="summarizer" type="button" class="btn btn-secondary btn-sm">добавить к
                            суммарной</button>
                    </div>
                </div>
                <div class="row justify-content-start">
                    <p id="sumPower" style="font-size: 25px;font-weight: bold">Суммарная мощность, кВт: </p>
                </div>
                <div class="row gx-1 justify-content-start">
                    <div class=col-auto align-self-center>
                        <button id="sender" type="button" class="btn btn-secondary btn-sm">посчитать потребное
                            сечение</button>
                    </div>
                    <div class=col-auto align-self-center>
                        <button id="clearer" type="button" class="btn btn-secondary btn-sm">сбросить суммарное
                            значение</button>
                    </div>
                </div>
                <div class="row justify-content-start">
                    <p id="requiredSection" style="font-size: 25px;font-weight: bold">Потребное сечение, мм2: </p>
                </div>
            </div>
        </div>
        <div class="row justify-content-start">
            <div class="col-auto align-self-start" style="font-size: 12px">
                Расчет выполняется при коф-те запаса 1 и коэф-те включения 1
            </div>
        </div>
    </div>
    <script>
        let squareOfwire = {
            4.1: 1.5,
            5.9: 2.5,
            8.3: 4.0,
            10.1: 6.0,
            15.4: 10.0,
            18.7: 16.0,
            25.3: 25.0,
            29.7: 35.0,
            38.5: 50.0,
            47.3: 70.0,
            57.2: 95.0,
            66.0: 120.0
        };

        let nominalPowers = [
            4.1, 5.9, 8.3, 10.1, 15.4, 18.7, 25.3, 29.7, 38.5, 47.3,
            57.2, 66.0
        ];

        function closestbiggest(value, arr) {
            let closestBiggest = 4.1;
            for (let i = 1; i < arr.length; i++) {
                if (value > arr[i - 1] && value <= arr[i]) {
                    closestBiggest = arr[i];
                }
                if (value > 66) {
                    closestBiggest = value;
                }
            }
            return closestBiggest;
        }

        let sumPower = 0;

        summarizer.onclick = function (event) {
            let data = document.getElementById('addedPower').value;
            sumPower += Number(data);
            document.getElementById('sumPower').textContent =
                "Суммарная мощность, кВт: " + sumPower;
        }

        sender.onclick = function (event) {
            let tablePower = closestbiggest(sumPower, nominalPowers);
            if (tablePower <= 66) {
                tableSection = squareOfwire[tablePower];
                table = document.getElementById('mydata');
                for (let row of table.rows) {
                    if (row.cells[0].innerHTML == tablePower) {
                        row.classList.add("selected");
                    } else {row.classList.remove("selected")}
                }
            } else {
                tableSection = "too big value of power";
            }
            document.getElementById('requiredSection').textContent =
                "Потребное сечение, мм2: " + tableSection;
        }

        clearer.onclick = function (event) {
            sumPower = 0;
            document.getElementById('sumPower').textContent =
                "Суммарная мощность, кВт: ";
            document.getElementById('requiredSection').textContent =
                "Потребное сечение, мм2: ";
            for (let row of document.getElementById('mydata').rows) {
                row.classList.remove("selected");
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>
</body>

</html>